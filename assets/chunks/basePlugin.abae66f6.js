function Y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Y(Object(r),!0).forEach(function(n){ne(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function T(e){"@babel/helpers - typeof";return T=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},T(e)}function U(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K(n.key),n)}}function G(e,t,r){return t&&k(e.prototype,t),r&&k(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ne(e,t,r){return t=K(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},C(e)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,a){return n.__proto__=a,n},j(e,t)}function ae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function oe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){if(t&&(typeof t=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oe(e)}function Ct(e){var t=ae();return function(){var n=C(e),a;if(t){var o=C(this).constructor;a=Reflect.construct(n,arguments,o)}else a=n.apply(this,arguments);return ie(this,a)}}function se(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&(e=C(e),e!==null););return e}function D(){return typeof Reflect<"u"&&Reflect.get?D=Reflect.get.bind():D=function(t,r,n){var a=se(t,r);if(a){var o=Object.getOwnPropertyDescriptor(a,r);return o.get?o.get.call(arguments.length<3?t:n):o.value}},D.apply(this,arguments)}function $(e){return ue(e)||ce(e)||fe(e)||le()}function ue(e){if(Array.isArray(e))return M(e)}function ce(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function fe(e,t){if(e){if(typeof e=="string")return M(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return M(e,t)}}function M(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function le(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ge(e,t){if(typeof e!="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function K(e){var t=ge(e,"string");return typeof t=="symbol"?t:String(t)}var Rt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Z={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(f,c,l){this.fn=f,this.context=c,this.once=l||!1}function o(f,c,l,g,d){if(typeof l!="function")throw new TypeError("The listener must be a function");var h=new a(l,g||f,d),v=r?r+c:c;return f._events[v]?f._events[v].fn?f._events[v]=[f._events[v],h]:f._events[v].push(h):(f._events[v]=h,f._eventsCount++),f}function u(f,c){--f._eventsCount===0?f._events=new n:delete f._events[c]}function s(){this._events=new n,this._eventsCount=0}s.prototype.eventNames=function(){var c=[],l,g;if(this._eventsCount===0)return c;for(g in l=this._events)t.call(l,g)&&c.push(r?g.slice(1):g);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(l)):c},s.prototype.listeners=function(c){var l=r?r+c:c,g=this._events[l];if(!g)return[];if(g.fn)return[g.fn];for(var d=0,h=g.length,v=new Array(h);d<h;d++)v[d]=g[d].fn;return v},s.prototype.listenerCount=function(c){var l=r?r+c:c,g=this._events[l];return g?g.fn?1:g.length:0},s.prototype.emit=function(c,l,g,d,h,v){var y=r?r+c:c;if(!this._events[y])return!1;var p=this._events[y],_=arguments.length,A,E;if(p.fn){switch(p.once&&this.removeListener(c,p.fn,void 0,!0),_){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,l),!0;case 3:return p.fn.call(p.context,l,g),!0;case 4:return p.fn.call(p.context,l,g,d),!0;case 5:return p.fn.call(p.context,l,g,d,h),!0;case 6:return p.fn.call(p.context,l,g,d,h,v),!0}for(E=1,A=new Array(_-1);E<_;E++)A[E-1]=arguments[E];p.fn.apply(p.context,A)}else{var S=p.length,O;for(E=0;E<S;E++)switch(p[E].once&&this.removeListener(c,p[E].fn,void 0,!0),_){case 1:p[E].fn.call(p[E].context);break;case 2:p[E].fn.call(p[E].context,l);break;case 3:p[E].fn.call(p[E].context,l,g);break;case 4:p[E].fn.call(p[E].context,l,g,d);break;default:if(!A)for(O=1,A=new Array(_-1);O<_;O++)A[O-1]=arguments[O];p[E].fn.apply(p[E].context,A)}}return!0},s.prototype.on=function(c,l,g){return o(this,c,l,g,!1)},s.prototype.once=function(c,l,g){return o(this,c,l,g,!0)},s.prototype.removeListener=function(c,l,g,d){var h=r?r+c:c;if(!this._events[h])return this;if(!l)return u(this,h),this;var v=this._events[h];if(v.fn)v.fn===l&&(!d||v.once)&&(!g||v.context===g)&&u(this,h);else{for(var y=0,p=[],_=v.length;y<_;y++)(v[y].fn!==l||d&&!v[y].once||g&&v[y].context!==g)&&p.push(v[y]);p.length?this._events[h]=p.length===1?p[0]:p:u(this,h)}return this},s.prototype.removeAllListeners=function(c){var l;return c?(l=r?r+c:c,this._events[l]&&u(this,l)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=r,s.EventEmitter=s,e.exports=s})(Z);var ve=Z.exports;const It=pe(ve);var he=typeof window<"u"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,N={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},H="%c[xgplayer]",P={config:{debug:he?3:0},logInfo:function(t){for(var r,n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];this.config.debug>=3&&(r=console).log.apply(r,[H,N.info,t].concat(a))},logWarn:function(t){for(var r,n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];this.config.debug>=1&&(r=console).warn.apply(r,[H,N.warn,t].concat(a))},logError:function(t){var r;if(!(this.config.debug<1)){for(var n=this.config.debug>=2?"trace":"error",a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];(r=console)[n].apply(r,[H,N.error,t].concat(o))}}};function Lt(e){e.logInfo=P.logInfo.bind(e),e.logWarn=P.logWarn.bind(e),e.logError=P.logError.bind(e)}var de=function(){function e(t){U(this,e),this.bufferedList=t}return G(e,[{key:"start",value:function(r){return this.bufferedList[r].start}},{key:"end",value:function(r){return this.bufferedList[r].end}},{key:"length",get:function(){return this.bufferedList.length}}]),e}(),i={};i.createDom=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",a=document.createElement(e);return a.className=n,a.innerHTML=t,Object.keys(r).forEach(function(o){var u=o,s=r[o];e==="video"||e==="audio"||e==="live-video"?s&&a.setAttribute(u,s):a.setAttribute(u,s)}),a};i.createDomFromHtml=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var n=document.createElement("div");n.innerHTML=e;var a=n.children;return n=null,a.length>0?(a=a[0],r&&i.addClass(a,r),t&&Object.keys(t).forEach(function(o){a.setAttribute(o,t[o])}),a):null}catch(o){return P.logError("util.createDomFromHtml",o),null}};i.hasClass=function(e,t){if(!e||!t)return!1;try{return Array.prototype.some.call(e.classList,function(n){return n===t})}catch{var r=e.className&&T(e.className)==="object"?e.getAttribute("class"):e.className;return r&&!!r.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}};i.addClass=function(e,t){if(!(!e||!t))try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(r){r&&e.classList.add(r)})}catch{i.hasClass(e,t)||(e.className&&T(e.className)==="object"?e.setAttribute("class",e.getAttribute("class")+" "+t):e.className+=" "+t)}};i.removeClass=function(e,t){if(!(!e||!t))try{t.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(r){r&&e.classList.remove(r)})}catch{i.hasClass(e,t)&&t.split(/\s+/g).forEach(function(n){var a=new RegExp("(\\s|^)"+n+"(\\s|$)");e.className&&T(e.className)==="object"?e.setAttribute("class",e.getAttribute("class").replace(a," ")):e.className=e.className.replace(a," ")})}};i.toggleClass=function(e,t){e&&t.split(/\s+/g).forEach(function(r){i.hasClass(e,r)?i.removeClass(e,r):i.addClass(e,r)})};i.classNames=function(){for(var e=arguments,t=[],r=function(o){i.typeOf(e[o])==="String"?t.push(e[o]):i.typeOf(e[o])==="Object"&&Object.keys(e[o]).map(function(u){e[o][u]&&t.push(u)})},n=0;n<arguments.length;n++)r(n);return t.join(" ")};i.findDom=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,t=arguments.length>1?arguments[1]:void 0,r;try{r=e.querySelector(t)}catch(n){P.logError("util.findDom",n),t.indexOf("#")===0&&(r=e.getElementById(t.slice(1)))}return r};i.getCss=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,!1)[t]};i.padStart=function(e,t,r){for(var n=String(r),a=t>>0,o=Math.ceil(a/n.length),u=[],s=String(e);o--;)u.push(n);return u.join("").substring(0,a-s.length)+s};i.format=function(e){if(window.isNaN(e))return"";e=Math.round(e);var t=i.padStart(Math.floor(e/3600),2,0),r=i.padStart(Math.floor((e-t*3600)/60),2,0),n=i.padStart(Math.floor(e-t*3600-r*60),2,0);return(t==="00"?[r,n]:[t,r,n]).join(":")};i.event=function(e){if(e.touches){var t=e.touches[0]||e.changedTouches[0];e.clientX=t.clientX||0,e.clientY=t.clientY||0,e.offsetX=t.pageX-t.target.offsetLeft,e.offsetY=t.pageY-t.target.offsetTop}e._target=e.target||e.srcElement};i.typeOf=function(e){return Object.prototype.toString.call(e).match(/([^\s.*]+)(?=]$)/g)[0]};i.deepCopy=function(e,t){if(i.typeOf(t)==="Object"&&i.typeOf(e)==="Object")return Object.keys(t).forEach(function(r){i.typeOf(t[r])==="Object"&&!(t[r]instanceof Node)?e[r]===void 0||e[r]===void 0?e[r]=t[r]:i.deepCopy(e[r],t[r]):i.typeOf(t[r])==="Array"?e[r]=i.typeOf(e[r])==="Array"?e[r].concat(t[r]):t[r]:e[r]=t[r]}),e};i.deepMerge=function(e,t){return Object.keys(t).map(function(r){if(i.typeOf(t[r])==="Array"&&i.typeOf(e[r])==="Array"){if(i.typeOf(e[r])==="Array"){var n;(n=e[r]).push.apply(n,$(t[r]))}}else i.typeOf(e[r])===i.typeOf(t[r])&&e[r]!==null&&i.typeOf(e[r])==="Object"&&!(t[r]instanceof window.Node)?i.deepMerge(e[r],t[r]):t[r]!==null&&(e[r]=t[r])}),e};i.getBgImage=function(e){var t=(e.currentStyle||window.getComputedStyle(e,null)).backgroundImage;if(!t||t==="none")return"";var r=document.createElement("a");return r.href=t.replace(/url\("|"\)/g,""),r.href};i.copyDom=function(e){if(e&&e.nodeType===1){var t=document.createElement(e.tagName);return Array.prototype.forEach.call(e.attributes,function(r){t.setAttribute(r.name,r.value)}),e.innerHTML&&(t.innerHTML=e.innerHTML),t}else return""};i.setInterval=function(e,t,r,n){e._interval[t]||(e._interval[t]=window.setInterval(r.bind(e),n))};i.clearInterval=function(e,t){clearInterval(e._interval[t]),e._interval[t]=null};i.setTimeout=function(e,t,r){e._timers||(e._timers=[]);var n=setTimeout(function(){t(),i.clearTimeout(e,n)},r);return e._timers.push(n),n};i.clearTimeout=function(e,t){var r=e._timers;if(i.typeOf(r)==="Array"){for(var n=0;n<r.length;n++)if(r[n]===t){r.splice(n,1),clearTimeout(t);break}}else clearTimeout(t)};i.clearAllTimers=function(e){var t=e._timers;i.typeOf(t)==="Array"&&(t.map(function(r){clearTimeout(r)}),e._timerIds=[])};i.createImgBtn=function(e,t,r,n){var a=i.createDom("xg-".concat(e),"",{},"xgplayer-".concat(e,"-img"));if(a.style.backgroundImage='url("'.concat(t,'")'),r&&n){var o,u,s;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(f){return r.indexOf(f)>-1&&n.indexOf(f)>-1?(o=parseFloat(r.slice(0,r.indexOf(f)).trim()),u=parseFloat(n.slice(0,n.indexOf(f)).trim()),s=f,!1):!0}),a.style.width="".concat(o).concat(s),a.style.height="".concat(u).concat(s),a.style.backgroundSize="".concat(o).concat(s," ").concat(u).concat(s),e==="start"?a.style.margin="-".concat(u/2).concat(s," auto auto -").concat(o/2).concat(s):a.style.margin="auto 5px auto 5px"}return a};i.Hex2RGBA=function(e,t){var r=[];if(/^\#[0-9A-F]{3}$/i.test(e)){var n="#";e.replace(/[0-9A-F]/ig,function(a){n+=a+a}),e=n}return/^#[0-9A-F]{6}$/i.test(e)?(e.replace(/[0-9A-F]{2}/ig,function(a){r.push(parseInt(a,16))}),"rgba(".concat(r.join(","),", ").concat(t,")")):"rgba(255, 255, 255, 0.1)"};i.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};i.checkIsFunction=function(e){return e&&typeof e=="function"};i.checkIsObject=function(e){return e!==null&&T(e)==="object"};i.hide=function(e){e.style.display="none"};i.show=function(e,t){e.style.display=t||"block"};i.isUndefined=function(e){if(typeof e>"u"||e===null)return!0};i.isNotNull=function(e){return e!=null};i.setStyleFromCsstext=function(e,t){if(t)if(i.typeOf(t)==="String"){var r=t.replace(/\s+/g,"").split(";");r.map(function(n){if(n){var a=n.split(":");a.length>1&&(e.style[a[0]]=a[1])}})}else Object.keys(t).map(function(n){e.style[n]=t[n]})};function me(e,t){for(var r=0,n=t.length;r<n;r++)if(e.indexOf(t[r])>-1)return!0;return!1}i.filterStyleFromText=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],r=e.style.cssText;if(!r)return{};var n=r.replace(/\s+/g,"").split(";"),a={},o={};return n.map(function(u){if(u){var s=u.split(":");s.length>1&&(me(s[0],t)?a[s[0]]=s[1]:o[s[0]]=s[1])}}),e.setAttribute("style",""),Object.keys(o).map(function(u){e.style[u]=o[u]}),a};i.getStyleFromCsstext=function(e){var t=e.style.cssText;if(!t)return{};var r=t.replace(/\s+/g,"").split(";"),n={};return r.map(function(a){if(a){var o=a.split(":");o.length>1&&(n[o[0]]=o[1])}}),n};i.preloadImg=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(e){var n=new window.Image;n.onload=function(a){n=null,t&&t(a)},n.onerror=function(a){n=null,r&&r(a)},n.src=e}};i.stopPropagation=function(e){e&&e.stopPropagation()};i.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};i.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};i.checkTouchSupport=function(){return"ontouchstart"in window};i.getBuffered2=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,r=[],n=0;n<e.length;n++)r.push({start:e.start(n)<.5?0:e.start(n),end:e.end(n)});r.sort(function(f,c){var l=f.start-c.start;return l||c.end-f.end});var a=[];if(t)for(var o=0;o<r.length;o++){var u=a.length;if(u){var s=a[u-1].end;r[o].start-s<t?r[o].end>s&&(a[u-1].end=r[o].end):a.push(r[o])}else a.push(r[o])}else a=r;return new de(a)};i.getEventPos=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return e.touches&&e.touches.length>0&&(e=e.touches[0]),{x:e.x/t,y:e.y/t,clientX:e.clientX/t,clientY:e.clientY/t,offsetX:e.offsetX/t,offsetY:e.offsetY/t,pageX:e.pageX/t,pageY:e.pageY/t}};i.requestAnimationFrame=function(e){var t=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(t)return t(e)};i.getHostFromUrl=function(e){if(i.typeOf(e)!=="String")return"";var t=e.split("/"),r="";return t.length>3&&t[2]&&(r=t[2]),r};i.cancelAnimationFrame=function(e){var t=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;t&&t(e)};i.isMSE=function(e){return e.media&&(e=e.media),!e||!(e instanceof HTMLMediaElement)?!1:/^blob/.test(e.currentSrc)||/^blob/.test(e.src)};i.isBlob=function(e){return typeof e=="string"&&/^blob/.test(e)};i.generateSessionId=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,t=new Date().getTime();try{e=parseInt(e)}catch{e=0}t+=e,window.performance&&typeof window.performance.now=="function"&&(t+=parseInt(window.performance.now()));var r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var a=(t+Math.random()*16)%16|0;return t=Math.floor(t/16),(n==="x"?a:a&3|8).toString(16)});return r};i.createEvent=function(e){var t;return typeof window.Event=="function"?t=new Event(e):(t=document.createEvent("Event"),t.initEvent(e,!0,!0)),t};i.adjustTimeByDuration=function(e,t,r){return!t||!e?e:e>t||r&&e<t?t:e};i.createPositionBar=function(e,t){var r=i.createDom("xg-bar","",{"data-index":-1},e);return t.appendChild(r),r};i.getTransformStyle=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",r={scale:"".concat(e.scale||1),translate:"".concat(e.x||0,"%, ").concat(e.y||0,"%"),rotate:"".concat(e.rotate||0,"deg")},n=Object.keys(r);return n.forEach(function(a){var o=new RegExp("".concat(a,"\\([^\\(]+\\)"),"g"),u="".concat(a,"(").concat(r[a],")");o.test(t)?(o.lastIndex=-1,t=t.replace(o,u)):t+="".concat(u," ")}),t};i.convertDeg=function(e){return Math.abs(e)<=1?e*360:e%360};i.getIndexByTime=function(e,t){var r=t.length,n=-1;if(r<1)return n;if(e<=t[0].end||r<2)n=0;else if(e>t[r-1].end)n=r-1;else for(var a=1;a<r;a++)if(e>t[a-1].end&&e<=t[a].end){n=a;break}return n};i.getOffsetCurrentTime=function(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:-1,n=-1;if(r>=0&&r<t.length?n=r:n=i.getIndexByTime(e,t),n<0)return-1;var a=t.length,o=t[n],u=o.start,s=o.end,f=o.cTime,c=o.offset;return e<u?f:e>=u&&e<=s?e-c:e>s&&n>=a-1?s:-1};i.getCurrentTimeByOffset=function(e,t){var r=-1;if(!t||t.length<0)return e;for(var n=0;n<t.length;n++)if(e<=t[n].duration){r=n;break}if(r!==-1){var a=t[r].start;return r-1<0?a+e:a+(e-t[r-1].duration)}return e};function J(e){var t=T(e);return e!==null&&(t==="object"||t==="function")}function ye(e,t,r){var n,a,o,u,s,f,c=0,l=!1,g=!1,d=!0,h=!t&&t!==0&&typeof window.requestAnimationFrame=="function";if(typeof e!="function")throw new TypeError("Expected a function");t=+t||0,J(r)&&(l=!!r.leading,g="maxWait"in r,o=g?Math.max(+r.maxWait||0,t):o,d="trailing"in r?!!r.trailing:d);function v(m){var b=n,w=a;return n=a=void 0,c=m,u=e.apply(w,b),u}function y(m,b){return h?(window.cancelAnimationFrame(s),window.requestAnimationFrame(m)):setTimeout(m,b)}function p(m){if(h)return window.cancelAnimationFrame(m);clearTimeout(m)}function _(m){return c=m,s=y(S,t),l?v(m):u}function A(m){var b=m-f,w=m-c,x=t-b;return g?Math.min(x,o-w):x}function E(m){var b=m-f,w=m-c;return f===void 0||b>=t||b<0||g&&w>=o}function S(){var m=Date.now();if(E(m))return O(m);s=y(S,A(m))}function O(m){return s=void 0,d&&n?v(m):(n=a=void 0,u)}function ee(){s!==void 0&&p(s),c=0,n=f=a=s=void 0}function te(){return s===void 0?u:O(Date.now())}function re(){return s!==void 0}function R(){for(var m=Date.now(),b=E(m),w=arguments.length,x=new Array(w),I=0;I<w;I++)x[I]=arguments[I];if(n=x,a=this,f=m,b){if(s===void 0)return _(f);if(g)return s=y(S,t),v(f)}return s===void 0&&(s=y(S,t)),u}return R.cancel=ee,R.flush=te,R.pending=re,R}function Dt(e,t,r){var n=!0,a=!0;if(typeof e!="function")throw new TypeError("Expected a function");return J(r)&&(n="leading"in r?!!r.leading:n,a="trailing"in r?!!r.trailing:a),ye(e,t,{leading:n,trailing:a,maxWait:t})}function Nt(){var e=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return e==="zh-cn"&&(e="zh"),e}function Ht(e,t,r){if(e){var n=e.getAttribute(r);return!!(n&&n===t&&(e.tagName==="VIDEO"||e.tagName==="AUDIO"))}}var X="3.0.23",Ft={1:"media",2:"media",3:"media",4:"media",5:"media",6:"media"},W={1:5101,2:5102,3:5103,4:5104,5:5105,6:5106},jt=G(function e(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null};U(this,e);var n=t&&t.i18n?t.i18n.ERROR_TYPES:null;if(t.media){var a=r.mediaError?r.mediaError:t.media.error||{},o=t.duration,u=t.currentTime,s=t.ended,f=t.src,c=t.currentSrc,l=t.media,g=l.readyState,d=l.networkState,h=r.errorCode||a.code;W[h]&&(h=W[h]);var v={playerVersion:X,currentTime:u,duration:o,ended:s,readyState:g,networkState:d,src:f||c,errorType:r.errorType,errorCode:h,message:r.errorMessage||a.message,mediaError:a,originError:r.originError?r.originError.stack:"",host:i.getHostFromUrl(f||c)};return r.ext&&Object.keys(r.ext).map(function(A){v[A]=r.ext[A]}),v}else if(arguments.length>1){for(var y={playerVersion:X,domain:document.domain},p=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],_=0;_<arguments.length;_++)y[p[_]]=arguments[_];return y.ex=n?(n[arguments[0]]||{}).msg:"",y}}),Ee="play",_e="playing",Ae="ended",be="pause",Oe="error",we="seeking",Te="seeked",Se="timeupdate",Pe="waiting",xe="canplay",Ce="canplaythrough",Re="durationchange",Ie="volumechange",Le="loadeddata",De="loadedmetadata",Ne="ratechange",He="progress",Fe="loadstart",je="emptied",Me="stalled",Ue="suspend",Ge="abort",Ye="bufferedChange",Be="focus",ke="blur",Xe="ready",We="urlNull",Ve="autoplay_started",ze="autoplay_was_prevented",qe="complete",$e="replay",Ke="destroy",Ze="urlchange",Je="download_speed_change",Qe="leaveplayer",et="enterplayer",tt="loading",rt="fullscreen_change",nt="cssFullscreen_change",at="mini_state_change",ot="definition_change",it="before_definition_change",st="after_definition_change",ut="SEI_PARSED",ct="retry",ft="video_resize",lt="pip_change",gt="rotate",pt="screenShot",vt="playnext",ht="shortcut",dt="xglog",mt="user_action",yt="reset",Et="source_error",_t="source_success",At="switch_subtitle",bt=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],Ot={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},wt="fps_stuck";const Mt=Object.freeze(Object.defineProperty({__proto__:null,ABORT:Ge,AFTER_DEFINITION_CHANGE:st,AUTOPLAY_PREVENTED:ze,AUTOPLAY_STARTED:Ve,BEFORE_DEFINITION_CHANGE:it,BUFFER_CHANGE:Ye,CANPLAY:xe,CANPLAY_THROUGH:Ce,COMPLETE:qe,CSS_FULLSCREEN_CHANGE:nt,DEFINITION_CHANGE:ot,DESTROY:Ke,DOWNLOAD_SPEED_CHANGE:Je,DURATION_CHANGE:Re,EMPTIED:je,ENDED:Ae,ENTER_PLAYER:et,ERROR:Oe,FPS_STUCK:wt,FULLSCREEN_CHANGE:rt,LEAVE_PLAYER:Qe,LOADED_DATA:Le,LOADED_METADATA:De,LOADING:tt,LOAD_START:Fe,MINI_STATE_CHANGE:at,PAUSE:be,PIP_CHANGE:lt,PLAY:Ee,PLAYER_BLUR:ke,PLAYER_FOCUS:Be,PLAYING:_e,PLAYNEXT:vt,PROGRESS:He,RATE_CHANGE:Ne,READY:Xe,REPLAY:$e,RESET:yt,RETRY:ct,ROTATE:gt,SCREEN_SHOT:pt,SEEKED:Te,SEEKING:we,SEI_PARSED:ut,SHORTCUT:ht,SOURCE_ERROR:Et,SOURCE_SUCCESS:_t,STALLED:Me,STATS_EVENTS:Ot,SUSPEND:Ue,SWITCH_SUBTITLE:At,TIME_UPDATE:Se,URL_CHANGE:Ze,URL_NULL:We,USER_ACTION:mt,VIDEO_EVENTS:bt,VIDEO_RESIZE:ft,VOLUME_CHANGE:Ie,WAITING:Pe,XGLOG:dt},Symbol.toStringTag,{value:"Module"}));function L(e,t,r){for(var n=arguments.length,a=new Array(n>3?n-3:0),o=3;o<n;o++)a[o-3]=arguments[o];var u=t.call.apply(t,[e].concat(a));!r||typeof r!="function"||(u&&u.then?u.then(function(){for(var s=arguments.length,f=new Array(s),c=0;c<s;c++)f[c]=arguments[c];r.call.apply(r,[e].concat(f))}):r.call.apply(r,[e].concat(a)))}function V(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[e]&&(this.__hooks[e]=null),(function(){var n=arguments,a=this;if(r.pre)try{var o;(o=r.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(s){throw s.message="[pluginName: ".concat(this.pluginName,":").concat(e,":pre error] >> ").concat(s.message),s}if(this.__hooks&&this.__hooks[e])try{var u=Pt.apply(void 0,[this,e,t].concat(Array.prototype.slice.call(arguments)));u?u.then?u.then(function(s){s!==!1&&L.apply(void 0,[a,t,r.next].concat($(n)))}).catch(function(s){throw s}):L.apply(void 0,[this,t,r.next].concat(Array.prototype.slice.call(arguments))):u===void 0&&L.apply(void 0,[this,t,r.next].concat(Array.prototype.slice.call(arguments)))}catch(s){throw s.message="[pluginName: ".concat(this.pluginName,":").concat(e,"] >> ").concat(s.message),s}else L.apply(void 0,[this,t,r.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function Q(e,t){var r=this.__hooks;if(!r||!Array.isArray(r[e]))return-1;for(var n=r[e],a=0;a<n.length;a++)if(n[a]===t)return a;return-1}function z(e,t){var r=this.__hooks;if(r)return r.hasOwnProperty(e)?(Array.isArray(r[e])||(r[e]=[]),Q.call(this,e,t)===-1&&r[e].push(t),!0):(console.warn("has no supported hook which name [".concat(e,"]")),!1)}function q(e,t){var r=this.__hooks;if(r)if(Array.isArray(r[e])){var n=r[e],a=Q.call(this,e,t);a!==-1&&n.splice(a,1)}else r[e]&&(r[e]=null)}function Ut(e){if(!(!this.plugins||!this.plugins[e.toLowerCase()])){for(var t=this.plugins[e.toLowerCase()],r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.useHooks&&t.useHooks.apply(t,n)}}function Gt(e){if(!(!this.plugins||!this.plugins[e.toLowerCase()])){var t=this.plugins[e.toLowerCase()];if(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return t.removeHooks&&t.removeHooks.apply(t,n)}}}function Tt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];e.__hooks={},t&&t.map(function(r){e.__hooks[r]=null}),Object.defineProperty(e,"hooks",{get:function(){return e.__hooks&&Object.keys(e.__hooks).map(function(n){if(e.__hooks[n])return n})}})}function St(e){e.__hooks=null}function Pt(e,t,r){for(var n=arguments.length,a=new Array(n>3?n-3:0),o=3;o<n;o++)a[o-3]=arguments[o];if(e.__hooks&&Array.isArray(e.__hooks[t])){var u=e.__hooks[t],s=-1,f=function c(l,g,d){for(var h=arguments.length,v=new Array(h>3?h-3:0),y=3;y<h;y++)v[y-3]=arguments[y];if(s++,u.length===0||s===u.length)return d.call.apply(d,[l,l].concat(v));var p=u[s],_=p.call.apply(p,[l,l].concat(v));if(_&&_.then)return _.then(function(A){return A===!1?null:c.apply(void 0,[l,g,d].concat(v))}).catch(function(A){console.warn("[runHooks]".concat(g," reject"),A.message)});if(_!==!1)return c.apply(void 0,[l,g,d].concat(v));if(_===!1)return!1};return f.apply(void 0,[e,t,r].concat(a))}else return r.call.apply(r,[e,e].concat(a))}function F(e,t){P.logError("[".concat(e,"] event or callback cant be undefined or null when call ").concat(t))}var Yt=function(){function e(t){U(this,e),i.checkIsFunction(this.beforeCreate)&&this.beforeCreate(t),Tt(this),this.__args=t,this.__events={},this.__onceEvents={},this.config=t.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(t)}return G(e,[{key:"beforeCreate",value:function(r){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(r){this.player=r.player,this.playerConfig=r.player&&r.player.config,this.pluginName=r.pluginName?r.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=r.player&&r.player.logger}},{key:"updateLang",value:function(r){r||(r=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var r=i.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(r=this.playerConfig.domEventType),r}},{key:"on",value:function(r,n){var a=this;if(!r||!n||!this.player){F(this.pluginName,"plugin.on(event, callback)");return}typeof r=="string"?(this.__events[r]=n,this.player.on(r,n)):Array.isArray(r)&&r.forEach(function(o){a.__events[o]=n,a.player.on(o,n)})}},{key:"once",value:function(r,n){var a=this;if(!r||!n||!this.player){F(this.pluginName,"plugin.once(event, callback)");return}typeof r=="string"?(this.__onceEvents[r]=n,this.player.once(r,n)):Array.isArray(r)&&r.forEach(function(o){a.__onceEvents[o]=n,a.player.once(r,n)})}},{key:"off",value:function(r,n){var a=this;if(!r||!n||!this.player){F(this.pluginName,"plugin.off(event, callback)");return}typeof r=="string"?(delete this.__events[r],this.player.off(r,n)):Array.isArray(r)&&r.forEach(function(o){delete a.__events[r],a.player.off(o,n)})}},{key:"offAll",value:function(){var r=this;["__events","__onceEvents"].forEach(function(n){Object.keys(r[n]).forEach(function(a){r[n][a]&&r.off(a,r[n][a]),a&&delete r[n][a]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(r){var n;if(this.player){for(var a=arguments.length,o=new Array(a>1?a-1:0),u=1;u<a;u++)o[u-1]=arguments[u];(n=this.player).emit.apply(n,[r].concat(o))}}},{key:"emitUserAction",value:function(r,n){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var o=B(B({},a),{},{pluginName:this.pluginName});this.player.emitUserAction(r,n,o)}}},{key:"hook",value:function(r,n){return V.call.apply(V,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(r,n){for(var a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];return z.call.apply(z,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(r,n){for(var a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];return q.call.apply(q,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return a&&(n.pluginName=a),this.player.registerPlugin({plugin:r,options:n})}},{key:"getPlugin",value:function(r){return this.player?this.player.getPlugin(r):null}},{key:"__destroy",value:function(){var r=this,n=this.player,a=this.pluginName;this.offAll(),i.clearAllTimers(this),i.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(o){r[o]=null}),n.unRegisterPlugin(a),St(this)}}],[{key:"defineGetterOrSetter",value:function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&Object.defineProperty(r,a,n[a])}},{key:"defineMethod",value:function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&typeof n[a]=="function"&&Object.defineProperty(r,a,{configurable:!0,value:n[a]})}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),e}();export{tt as $,Ve as A,Yt as B,xe as C,Pt as D,jt as E,rt as F,Te as G,ot as H,B as I,st as J,yt as K,Le as L,at as M,Ke as N,St as O,Ee as P,nt as Q,Xe as R,_t as S,Be as T,Ze as U,bt as V,Pe as W,P as X,ke as Y,Re as Z,xt as _,Ct as a,ft as a0,X as a1,V as a2,z as a3,q as a4,Ut as a5,Gt as a6,$e as a7,vt as a8,be as a9,je as aa,Se as ab,He as ac,Ae as ad,Ie as ae,Fe as af,we as ag,_e as ah,dt as ai,et as aj,Qe as ak,ht as al,gt as am,lt as an,Rt as ao,pt as ap,Ne as aq,Ot as ar,Je as as,wt as at,Mt as au,At as av,U as b,G as c,ne as d,Et as e,Ft as f,D as g,C as h,It as i,pe as j,T as k,Nt as l,$ as m,oe as n,ve as o,mt as p,Ht as q,Tt as r,Lt as s,Dt as t,i as u,ie as v,Oe as w,We as x,qe as y,ze as z};
